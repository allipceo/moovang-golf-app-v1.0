<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>서대리 코딩 지침서 - measurement.html</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .header { background: #007acc; color: white; padding: 15px; border-radius: 5px; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .important { background: #fff3cd; border-color: #ffeaa7; }
        .feature-box { background: #e8f5e8; padding: 15px; border-radius: 5px; margin: 10px 0; }
        .code-block { background: #f8f9fa; padding: 15px; border-radius: 5px; font-family: monospace; }
        .timeline { background: #f0f8f0; padding: 15px; border-left: 4px solid #2d5016; margin: 10px 0; }
        .warning { background: #f8d7da; border-color: #f5c6cb; color: #721c24; padding: 10px; border-radius: 3px; }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #2d5016; color: white; }
        ul li { margin: 5px 0; }
        .cycle-step { background: #e3f2fd; padding: 10px; margin: 5px 0; border-radius: 3px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>🏌️ 서대리 코딩 지침서</h1>
        <h2>measurement.html - 스윙 측정 페이지</h2>
        <p><strong>작성자:</strong> 노팀장 | <strong>작성일:</strong> [2025.01.10 16:00]</p>
    </div>

    <div class="section important">
        <h2>⚠️ 필수 준수 사항</h2>
        <ul>
            <li><strong>파일 위치:</strong> Z:\html\measurement.html</li>
            <li><strong>데이터 연동:</strong> swing_dataset.js 활용</li>
            <li><strong>핵심 기능:</strong> 20회 연속 측정 시뮬레이션</li>
            <li><strong>3초 사이클:</strong> 속도(1초) → 궤도(2초) → Ready</li>
            <li><strong>모바일 최적화:</strong> 터치 친화적 인터페이스</li>
            <li><strong>시각적 효과:</strong> 골프 스윙 궤도 애니메이션</li>
        </ul>
    </div>

    <div class="section">
        <h2>🎯 페이지 핵심 기능</h2>
        
        <div class="feature-box">
            <h3>연속 측정 모드 (20회 스윙)</h3>
            <ol>
                <li><strong>시작:</strong> "연속측정" 버튼 클릭</li>
                <li><strong>대기:</strong> "스윙하세요" 메시지 표시</li>
                <li><strong>측정:</strong> 스윙 감지 → 3초 사이클 실행</li>
                <li><strong>반복:</strong> 20회 완료까지 자동 진행</li>
                <li><strong>완료:</strong> 전체 결과 요약 표시</li>
            </ol>
        </div>

        <div class="timeline">
            <h3>🕐 3초 사이클 상세 구성</h3>
            <div class="cycle-step">
                <strong>0-1초:</strong> 스윙 속도 + 예상 비거리 표시
                <ul>
                    <li>대형 숫자로 헤드스피드 (예: "42 m/s")</li>
                    <li>예상 비거리 (예: "240 야드")</li>
                    <li>배경색 변화 (속도 구간별)</li>
                </ul>
            </div>
            <div class="cycle-step">
                <strong>1-3초:</strong> 스윙 궤도 애니메이션 (2초간)
                <ul>
                    <li>첨부 이미지 스타일의 3D 궤도 표시</li>
                    <li>색상별 구분 (백스윙→다운스윙→임팩트)</li>
                    <li>부드러운 애니메이션 효과</li>
                </ul>
            </div>
            <div class="cycle-step">
                <strong>3초 후:</strong> Ready 신호
                <ul>
                    <li>"Ready" 텍스트 + 진동/소리 효과</li>
                    <li>다음 스윙 번호 표시 (2/20)</li>
                    <li>전체 진행률 바 업데이트</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>📱 화면 구성 요구사항</h2>
        
        <h3>1. 헤더 영역</h3>
        <ul>
            <li>페이지 제목: "스윙 측정"</li>
            <li>홈 버튼 (←) - index.html로 이동</li>
            <li>현재 스윙 번호 / 총 횟수 (예: 5/20)</li>
            <li>진행률 프로그레스 바</li>
        </ul>

        <h3>2. 메인 디스플레이 영역</h3>
        <table>
            <tr>
                <th>상태</th>
                <th>표시 내용</th>
                <th>크기/위치</th>
            </tr>
            <tr>
                <td>대기 중</td>
                <td>"연속측정" 시작 버튼</td>
                <td>화면 중앙, 대형 버튼</td>
            </tr>
            <tr>
                <td>스윙 대기</td>
                <td>"스윙하세요" + 블루투스 상태</td>
                <td>화면 중앙, 명확한 지시</td>
            </tr>
            <tr>
                <td>속도 표시</td>
                <td>헤드스피드 + 비거리</td>
                <td>전체 화면, 대형 폰트</td>
            </tr>
            <tr>
                <td>궤도 표시</td>
                <td>3D 스윙 궤도 애니메이션</td>
                <td>전체 화면, 생동감 있게</td>
            </tr>
            <tr>
                <td>Ready</td>
                <td>"Ready" + 다음 스윙 안내</td>
                <td>화면 중앙, 눈에 띄게</td>
            </tr>
        </table>

        <h3>3. 하단 정보 영역</h3>
        <ul>
            <li>현재까지 평균 속도</li>
            <li>최고 기록</li>
            <li>일시정지/중단 버튼</li>
        </ul>
    </div>

    <div class="section">
        <h2>⚙️ 기술 구현 요구사항</h2>
        
        <h3>1. 데이터 연동</h3>
        <div class="code-block">
            <pre>
// swing_dataset.js import
import { swingDataset } from './data/swing_dataset.js';

// 또는 script 태그로 로드
&lt;script src="./data/swing_dataset.js"&gt;&lt;/script&gt;

// 스윙 데이터 접근
const currentSwing = swingDataset.swings[swingIndex];
const speed = currentSwing.analysis.driverSpeed;
const distance = currentSwing.analysis.distance;
const trajectory = currentSwing.visualization;
            </pre>
        </div>

        <h3>2. 타이밍 제어</h3>
        <div class="code-block">
            <pre>
function startSwingCycle(swingData) {
    // 1초: 속도 표시
    showSpeedAndDistance(swingData.analysis);
    
    setTimeout(() => {
        // 2초: 궤도 애니메이션
        animateTrajectory(swingData.visualization);
    }, 1000);
    
    setTimeout(() => {
        // Ready 신호
        showReadySignal();
    }, 3000);
}
            </pre>
        </div>

        <h3>3. 스윙 궤도 시각화</h3>
        <div class="code-block">
            <pre>
function animateTrajectory(vizData) {
    const canvas = document.getElementById('trajectoryCanvas');
    const ctx = canvas.getContext('2d');
    
    // 키포인트 기반 애니메이션
    vizData.keyPoints.forEach((point, index) => {
        setTimeout(() => {
            drawTrajectoryPoint(ctx, point, vizData.colors);
        }, index * 100); // 부드러운 애니메이션
    });
}
            </pre>
        </div>
    </div>

    <div class="section">
        <h2>🎨 시각적 디자인 가이드</h2>
        
        <h3>속도별 배경색 시스템</h3>
        <table>
            <tr>
                <th>속도 구간</th>
                <th>배경색</th>
                <th>텍스트색</th>
                <th>특징</th>
            </tr>
            <tr>
                <td>30-35 m/s</td>
                <td>#ffebee (연한 빨강)</td>
                <td>#d32f2f</td>
                <td>워밍업 단계</td>
            </tr>
            <tr>
                <td>35-40 m/s</td>
                <td>#fff3e0 (연한 주황)</td>
                <td>#f57c00</td>
                <td>적응 단계</td>
            </tr>
            <tr>
                <td>40-45 m/s</td>
                <td>#e8f5e8 (연한 초록)</td>
                <td>#388e3c</td>
                <td>우수 단계</td>
            </tr>
            <tr>
                <td>45+ m/s</td>
                <td>#e3f2fd (연한 파랑)</td>
                <td>#1976d2</td>
                <td>최고 단계</td>
            </tr>
        </table>

        <h3>궤도 애니메이션 스타일</h3>
        <ul>
            <li><strong>선 굵기:</strong> 5-8px (모바일에서 잘 보이게)</li>
            <li><strong>애니메이션 속도:</strong> 2초간 부드럽게</li>
            <li><strong>잔상 효과:</strong> 이전 궤도 흐리게 표시</li>
            <li><strong>임팩트 지점:</strong> 특별한 시각 효과 (번쩍임)</li>
        </ul>
    </div>

    <div class="section">
        <h2>📱 모바일 UX 최적화</h2>
        
        <h3>터치 인터페이스</h3>
        <ul>
            <li><strong>버튼 크기:</strong> 최소 44px × 44px</li>
            <li><strong>간격:</strong> 터치 요소 간 최소 8px</li>
            <li><strong>피드백:</strong> 터치 시 즉시 시각적 반응</li>
            <li><strong>스크롤 방지:</strong> 측정 중 화면 고정</li>
        </ul>

        <h3>성능 최적화</h3>
        <ul>
            <li><strong>Canvas 사용:</strong> HTML5 Canvas로 부드러운 애니메이션</li>
            <li><strong>requestAnimationFrame:</strong> 60fps 애니메이션</li>
            <li><strong>메모리 관리:</strong> 사용하지 않는 객체 정리</li>
            <li><strong>배터리 절약:</strong> 백그라운드에서 애니메이션 중지</li>
        </ul>
    </div>

    <div class="section">
        <h2>🔧 JavaScript 함수 명세</h2>
        
        <h3>필수 구현 함수</h3>
        <div class="code-block">
            <pre>
// 1. 측정 제어 함수
function startContinuousMeasurement()    // 20회 연속 측정 시작
function pauseMeasurement()              // 측정 일시 중지
function stopMeasurement()               // 측정 중단
function resetMeasurement()              // 측정 초기화

// 2. 스윙 처리 함수
function simulateSwingDetection()        // 스윙 감지 시뮬레이션
function processSwingData(swingIndex)    // 스윙 데이터 처리
function startSwingCycle(swingData)      // 3초 사이클 시작

// 3. 표시 함수
function showSpeedAndDistance(analysis)  // 속도/비거리 표시
function animateTrajectory(vizData)      // 궤도 애니메이션
function showReadySignal()               // Ready 신호 표시
function updateProgress(current, total)  // 진행률 업데이트

// 4. 결과 처리 함수
function calculateSessionStats()         // 세션 통계 계산
function showSessionResults()            // 전체 결과 표시
function saveToLocalStorage()            // 결과 저장
            </pre>
        </div>
    </div>

    <div class="section">
        <h2>🎮 사용자 상호작용 플로우</h2>
        
        <div class="timeline">
            <h3>전체 시나리오</h3>
            <ol>
                <li><strong>진입:</strong> index.html에서 "스윙측정" 클릭</li>
                <li><strong>준비:</strong> 블루투스 연결 상태 확인</li>
                <li><strong>시작:</strong> "연속측정" 버튼 클릭</li>
                <li><strong>대기:</strong> "스윙하세요" 표시</li>
                <li><strong>감지:</strong> 스윙 시뮬레이션 (자동 또는 화면 터치)</li>
                <li><strong>표시:</strong> 3초 사이클 실행</li>
                <li><strong>반복:</strong> 20회까지 자동 진행</li>
                <li><strong>완료:</strong> 세션 결과 표시</li>
                <li><strong>저장:</strong> 결과 localStorage 저장</li>
                <li><strong>선택:</strong> 재시작 or 분석화면 or 홈</li>
            </ol>
        </div>
    </div>

    <div class="section">
        <h2>🎯 스윙 감지 시뮬레이션</h2>
        
        <div class="code-block">
            <h3>구현 방법 (3가지 옵션)</h3>
            <pre>
// 옵션 1: 자동 진행 (3초마다)
setInterval(() => {
    if (isWaitingForSwing) {
        triggerSwingDetection();
    }
}, 3000);

// 옵션 2: 화면 터치
canvas.addEventListener('click', () => {
    if (isWaitingForSwing) {
        triggerSwingDetection();
    }
});

// 옵션 3: 스페이스바 (개발/테스트용)
document.addEventListener('keydown', (e) => {
    if (e.code === 'Space' && isWaitingForSwing) {
        triggerSwingDetection();
    }
});
            </pre>
        </div>
    </div>

    <div class="warning">
        <h2>🚨 중요 주의사항</h2>
        <ul>
            <li><strong>타이밍 정확성:</strong> 3초 사이클 정확히 준수</li>
            <li><strong>데이터 일관성:</strong> swing_dataset.js와 100% 연동</li>
            <li><strong>사용자 경험:</strong> 직관적이고 몰입감 있는 인터페이스</li>
            <li><strong>에러 처리:</strong> 중단/재시작 시나리오 고려</li>
            <li><strong>성능:</strong> 20회 연속 실행 시 렉 없음</li>
            <li><strong>모바일 최적화:</strong> 터치 반응성 최우선</li>
        </ul>
    </div>

    <div class="section">
        <h2>✅ 완성 검증 기준</h2>
        <ol>
            <li>20회 연속 측정 완벽 동작</li>
            <li>3초 사이클 정확한 타이밍</li>
            <li>스윙 궤도 애니메이션 부드럽게 표시</li>
            <li>모든 데이터 swing_dataset.js에서 정확히 로드</li>
            <li>모바일에서 터치 인터페이스 완벽 동작</li>
            <li>진행률 및 통계 정확히 계산</li>
            <li>세션 결과 localStorage 저장</li>
            <li>index.html과 일관된 디자인</li>
        </ol>
    </div>

    <hr>
    <footer>
        <p><strong>조대표님 승인 후 개발 시작!</strong></p>
        <p><em>완성 후 Z:\html\measurement.html에 저장하고 보고해주세요</em></p>
        <p>작성일: [2025.01.10 16:00] | 담당: 서대리</p>
        <p><strong>참고:</strong> swing_dataset.js 연동 필수</p>
    </footer>
</body>
</html>